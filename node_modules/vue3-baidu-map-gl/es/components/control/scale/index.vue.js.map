{"version":3,"file":"index.vue.js","sources":["../../../../packages/components/control/scale/index.vue"],"sourcesContent":["<template></template>\n\n<script setup lang=\"ts\">\n  import { defineProps, withDefaults, watch, defineEmits } from 'vue'\n  import useBaseMapEffect from '../../../hooks/useBaseMapEffect'\n  import useLifeCycle from '../../../hooks/useLifeCycle'\n  export interface ScaleProps {\n    /**\n     * 控件的停靠位置\n     */\n    anchor?: _ControlAnchor\n    /**\n     * 控件的偏移值\n     */\n    offset?: {\n      x: number\n      y: number\n    }\n    /**\n     * 比例尺单位制\n     */\n    unit?: _LengthUnit\n  }\n  const { ready } = useLifeCycle()\n  const props = withDefaults(defineProps<ScaleProps>(), {\n    anchor: 'BMAP_ANCHOR_BOTTOM_LEFT',\n    offset: () => ({ x: 83, y: 18 }),\n    unit: 'BMAP_UNIT_METRIC'\n  })\n  let scaleCtrl: BMapGL.ScaleControl\n  defineEmits(['initd', 'unload'])\n  useBaseMapEffect((map) => {\n    scaleCtrl = new BMapGL.ScaleControl({\n      offset: new BMapGL.Size(props.offset.x, props.offset.y),\n      anchor: window[props.anchor]\n    })\n    setUnit()\n    map.addControl(scaleCtrl)\n    ready(map, scaleCtrl)\n    return () => map.removeControl(scaleCtrl)\n  })\n  // 监听比例尺单位变化\n  watch(() => props.unit, setUnit)\n  /**\n   * 设置比例尺单位制\n   */\n  function setUnit() {\n    scaleCtrl.setUnit(window[props.unit])\n  }\n</script>\n<script lang=\"ts\">\n  export default {\n    name: 'BScale'\n  }\n</script>\n"],"names":[],"mappings":";;;;AAmDE,oBAAe;AACb,IAAA,IAAI,EAAE,QAAQ;CACf,CAAA;;;;;;;AA9BD,QAAA,MAAM,EAAE,KAAK,EAAE,GAAG,YAAY,EAAE,CAAA;AAMhC,QAAA,IAAI,SAA8B,CAAA;AAElC,QAAA,gBAAgB,CAAC,CAAC,GAAG,KAAI;AACvB,YAAA,SAAS,GAAG,IAAI,MAAM,CAAC,YAAY,CAAC;AAClC,gBAAA,MAAM,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;AACvD,gBAAA,MAAM,EAAE,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC;AAC7B,aAAA,CAAC,CAAA;AACF,YAAA,OAAO,EAAE,CAAA;AACT,YAAA,GAAG,CAAC,UAAU,CAAC,SAAS,CAAC,CAAA;AACzB,YAAA,KAAK,CAAC,GAAG,EAAE,SAAS,CAAC,CAAA;YACrB,OAAO,MAAM,GAAG,CAAC,aAAa,CAAC,SAAS,CAAC,CAAA;AAC3C,SAAC,CAAC,CAAA;;QAEF,KAAK,CAAC,MAAM,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,CAAA;AAChC;;AAEG;AACH,QAAA,SAAS,OAAO,GAAA;YACd,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAA;SACtC;;;;;;;;;;"}