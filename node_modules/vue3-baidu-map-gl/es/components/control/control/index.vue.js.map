{"version":3,"file":"index.vue.js","sources":["../../../../packages/components/control/control/index.vue"],"sourcesContent":["<template>\n  <div style=\"display: none\">\n    <div ref=\"controlContainer\" v-bind=\"$attrs\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\n  import { ref, defineProps, withDefaults, onMounted } from 'vue'\n  import useLifeCycle from '../../../hooks/useLifeCycle'\n  import useBaseMapEffect from '../../../hooks/useBaseMapEffect'\n  import { type ControlAnchor } from '../../../utils'\n  export interface ControlOptions {\n    /**\n     * 控件的停靠位置\n     */\n    anchor?: ControlAnchor\n    /**\n     * 控件的偏移值\n     */\n    offset?: {\n      x: number\n      y: number\n    }\n  }\n  const controlContainer = ref<HTMLDivElement>()\n  const { ready } = useLifeCycle()\n  const props = withDefaults(defineProps<ControlOptions>(), {\n    anchor: 'BMAP_ANCHOR_TOP_LEFT',\n    offset: () => ({ x: 83, y: 18 })\n  })\n  defineEmits(['initd', 'unload'])\n  onMounted(() => {\n    useBaseMapEffect((map: BMapGL.Map) => {\n      if (!controlContainer.value) return\n      const customControl = new BMapGL.Control()\n      customControl.defaultAnchor = window[props.anchor]\n      customControl.defaultOffset = new BMapGL.Size(props.offset!.x, props.offset!.y)\n      customControl.initialize = (_map: BMapGL.Map) => {\n        return _map.getContainer().appendChild(controlContainer.value as Node) as HTMLElement\n      }\n      map.addControl(customControl)\n      ready(map, customControl)\n      return () => map.removeControl(customControl)\n    })\n  })\n</script>\n<script lang=\"ts\">\n  export default {\n    name: 'BControl',\n    inheritAttrs: false\n  }\n</script>\n"],"names":[],"mappings":";;;;;AAiDE,oBAAe;AACb,IAAA,IAAI,EAAE,UAAU;AAChB,IAAA,YAAY,EAAE,KAAK;CACpB,CAAA;;;;;;AA1BD,QAAA,MAAM,gBAAgB,GAAG,GAAG,EAAkB,CAAA;AAC9C,QAAA,MAAM,EAAE,KAAK,EAAE,GAAG,YAAY,EAAE,CAAA;QAMhC,SAAS,CAAC,MAAK;AACb,YAAA,gBAAgB,CAAC,CAAC,GAAe,KAAI;gBACnC,IAAI,CAAC,gBAAgB,CAAC,KAAK;oBAAE,OAAM;AACnC,gBAAA,MAAM,aAAa,GAAG,IAAI,MAAM,CAAC,OAAO,EAAE,CAAA;gBAC1C,aAAa,CAAC,aAAa,GAAG,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAA;gBAClD,aAAa,CAAC,aAAa,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAO,CAAC,CAAC,EAAE,KAAK,CAAC,MAAO,CAAC,CAAC,CAAC,CAAA;AAC/E,gBAAA,aAAa,CAAC,UAAU,GAAG,CAAC,IAAgB,KAAI;oBAC9C,OAAO,IAAI,CAAC,YAAY,EAAE,CAAC,WAAW,CAAC,gBAAgB,CAAC,KAAa,CAAgB,CAAA;AACvF,iBAAC,CAAA;AACD,gBAAA,GAAG,CAAC,UAAU,CAAC,aAAa,CAAC,CAAA;AAC7B,gBAAA,KAAK,CAAC,GAAG,EAAE,aAAa,CAAC,CAAA;gBACzB,OAAO,MAAM,GAAG,CAAC,aAAa,CAAC,aAAa,CAAC,CAAA;AAC/C,aAAC,CAAC,CAAA;AACJ,SAAC,CAAC,CAAA;;;;;;;;;;;;;;;;;"}