{"version":3,"file":"index.vue.js","sources":["../../../../packages/components/overlay/circle/index.vue"],"sourcesContent":["<template></template>\n<script setup lang=\"ts\">\n  import { defineProps, provide, watch, withDefaults } from 'vue'\n  import useBaseMapEffect from '../../../hooks/useBaseMapEffect'\n  import useLifeCycle from '../../../hooks/useLifeCycle'\n  import { bindEvents, Callback, callWhenDifferentValue, StrokeStyle, type Point } from '../../../utils'\n  export interface CircleProps {\n    /**\n     * 圆形中心点经纬度\n     */\n    center: Point\n    /**\n     * 半径，以米为单位\n     */\n    radius: number\n    /**\n     * @default #000000\n     * 描边的颜色，同CSS颜色\n     */\n    strokeColor?: string\n    /**\n     * 描边的透明度，取值范围0 - 1\n     */\n    strokeOpacity?: number\n    /**\n     * 面填充颜色，同CSS颜色\n     */\n    fillColor?: string\n\n    /**\n     * 面填充的透明度，范围0-1\n     */\n    fillOpacity?: number\n    /**\n     * 描边的宽度，单位为像素\n     */\n    strokeWeight?: number\n    /**\n     * 折线的样式\n     */\n    strokeStyle?: StrokeStyle\n    /**\n     * @default true\n     * 是否在调用map.clearOverlays清除此覆盖物，默认为true\n     */\n    enableMassClear?: boolean\n    /**\n     * @default false\n     * 是否启用线编辑，默认为false\n     */\n    enableEditing?: boolean\n    /**\n     * @default true\n     * 是否响应点击事件，默认为true\n     */\n    enableClicking?: boolean\n    /**\n     * @default false\n     * 是否开启大地线模式，true时，两点连线将以大地线的形式。默认为false\n     */\n    geodesic?: boolean\n    /**\n     * @default true\n     * 是否进行跨经度180度裁剪，绘制跨精度180时为了优化效果，可以设置成false，默认为true\n     */\n    clip?: boolean\n    onClick?: Callback\n    onDblclick?: Callback\n    onMousedown?: Callback\n    onMouseup?: Callback\n    onMouseout?: Callback\n    onMouseover?: Callback\n    onRemove?: Callback\n    onLineupdate?: Callback\n  }\n  const props = withDefaults(defineProps<CircleProps>(), {\n    strokeColor: '#000',\n    strokeWeight: 2,\n    strokeOpacity: 1,\n    fillColor: '#fff',\n    fillOpacity: 0.3,\n    strokeStyle: 'solid',\n    enableMassClear: true,\n    enableEditing: false,\n    enableClicking: true,\n    geodesic: false,\n    clip: true\n  })\n  const vueEmits = defineEmits([\n    'initd',\n    'unload',\n    'click',\n    'dblclick',\n    'mousedown',\n    'mouseup',\n    'mouseout',\n    'mouseover',\n    'remove',\n    'lineupdate'\n  ])\n  const { ready } = useLifeCycle()\n  let circle: BMapGL.Circle\n  useBaseMapEffect((map: BMapGL.Map) => {\n    const cal = () => {\n      map.removeOverlay(circle)\n    }\n    const init = () => {\n      const {\n        center,\n        radius,\n        strokeColor,\n        strokeOpacity,\n        fillColor,\n        fillOpacity,\n        strokeWeight,\n        strokeStyle,\n        enableMassClear,\n        enableEditing,\n        enableClicking,\n        geodesic,\n        clip\n      } = props\n      const centerPoint = new BMapGL.Point(center.lng, center.lat)\n      circle = new BMapGL.Circle(centerPoint, radius, {\n        strokeColor,\n        strokeWeight,\n        strokeOpacity,\n        strokeStyle,\n        enableMassClear,\n        enableEditing,\n        enableClicking,\n        geodesic,\n        clip,\n        fillOpacity,\n        fillColor\n      })\n      map.addOverlay(circle)\n      bindEvents(props, vueEmits, circle)\n      ready(map, circle)\n    }\n\n    init()\n    // 监听值变化\n    watch(() => props.center, callWhenDifferentValue(setCenter), { deep: true })\n    watch(() => props.radius, setRadius)\n    watch(() => props.strokeColor, setStrokeColor)\n    watch(() => props.strokeOpacity, setStrokeOpacity)\n    watch(() => props.fillColor, setFillColor)\n    watch(() => props.fillOpacity, setFillOpacity)\n    watch(() => props.strokeWeight, setStrokeWeight)\n    watch(() => props.strokeStyle, setStrokeStyle)\n    watch(() => props.enableMassClear, setMassClear)\n    watch(() => props.enableEditing, setEditing)\n\n    return cal\n  })\n\n  provide('getOverlayInstance', () => circle)\n\n  function setRadius(radius: number): void {\n    circle.setRadius(radius)\n  }\n  function setCenter(center: Point): void {\n    if (circle) {\n      circle.setCenter(new BMapGL.Point(center.lng, center.lat))\n    }\n  }\n  function setStrokeColor(color: string): void {\n    circle.setStrokeColor(color)\n  }\n  function setFillColor(color: string): void {\n    circle.setFillColor(color)\n  }\n  function setStrokeOpacity(opacity: number): void {\n    circle.setStrokeOpacity(opacity)\n  }\n  function setFillOpacity(opacity: number): void {\n    circle.setFillOpacity(opacity)\n  }\n  function setStrokeWeight(weight: number): void {\n    circle.setStrokeWeight(weight)\n  }\n  function setStrokeStyle(style: StrokeStyle): void {\n    circle.setStrokeStyle(style)\n  }\n  function setMassClear(enableMassClear: boolean): void {\n    enableMassClear ? circle!.enableMassClear() : circle!.disableMassClear()\n  }\n  function setEditing(enableEditing: boolean): void {\n    enableEditing ? circle!.enableEditing() : circle!.disableEditing()\n  }\n</script>\n<script lang=\"ts\">\n  export default {\n    name: 'BCircle'\n  }\n</script>\n"],"names":[],"mappings":"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"}