!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).Vue3baiduMapGl={},e.Vue)}(this,(function(e,n){"use strict";const t={all:o=o||new Map,on:function(e,n){var t=o.get(e);t?t.push(n):o.set(e,[n])},off:function(e,n){var t=o.get(e);t&&(n?t.splice(t.indexOf(n)>>>0,1):o.set(e,[]))},emit:function(e,n){var t=o.get(e);t&&t.slice().map((function(e){e(n)})),(t=o.get("*"))&&t.slice().map((function(t){t(e,n)}))}};var o;function a(){return{emit:t.emit,on:t.on,off:t.off}}function l(){const{uid:e,emit:t}=n.getCurrentInstance(),{on:o,emit:l,off:i}=a(),r=`__initd__${e}`;return o(r,(e=>{t("initd",e)})),n.onUnmounted((()=>{t("unload"),i(r)})),{ready:(e,n)=>{l(r,{map:e,instance:n,BMapGL:window.BMapGL})}}}const i={};function r({key:e,src:n,addCalToWindow:t}){return i[e]||(i[e]=new Promise(((o,a)=>{const l=document.createElement("script"),i=()=>{o(),window.document.body.removeChild(l)};t?window[e]=i:l.onload=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(l.onload=null,i())},l.src=n,l.type="text/javascript",l.defer=!0,l.onerror=a,document.body.appendChild(l)}))),i[e]}const s="//mapopen.bj.bcebos.com/github/BMapGLLib/TrackAnimation/src/TrackAnimation.min.js",u="https://code.bdstatic.com/npm/mapvgl@1.0.0-beta.159/dist/mapvgl.min.js",c="https://mapv.baidu.com/build/mapv.min.js",d="https://unpkg.com/mapv-three@1.0.1/dist/mapvthree.umd.js",p={TrackAnimation:e=>r({src:e||s,addCalToWindow:!1,key:"trackAnimation"}),Mapvgl:e=>r({src:e||u,addCalToWindow:!1,key:"Mapvgl"}),Mapv:e=>r({src:e||c,addCalToWindow:!1,key:"Mapv"}),MapvThree:e=>r({src:e||d,addCalToWindow:!1,key:"MapvThree"})};function f(e,n,t){for(const o of Object.keys(e))if(/^on/.test(o)&&e[o]){const e=o.replace(/^on/,"").toLocaleLowerCase();t.addEventListener(e,(t=>{var o,a;t.preventDefault=t.preventDefault||(null===(o=t.domEvent)||void 0===o?void 0:o.preventDefault.bind(t.domEvent)),t.stopPropagation=t.stopPropagation||(null===(a=t.domEvent)||void 0===a?void 0:a.stopPropagation.bind(t.domEvent)),n(e,t)}))}}function m(e){return(n,t)=>{(n===t||n!==t&&JSON.stringify(n)!==JSON.stringify(t))&&e(n)}}function g(e){console.error(`[Vue3 BaiduMap GL] ${e}`)}function y(e){return"[object String]"===Object.prototype.toString.call(e)}function v(e){return"[object Array]"===Object.prototype.toString.call(e)}function C(e){return null!=e}var h;e.DistrictType=void 0,(h=e.DistrictType||(e.DistrictType={}))[h.PROVINCE=0]="PROVINCE",h[h.CITY=1]="CITY",h[h.AREA=2]="AREA";const w={style:{color:"#999",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}};var M=n.defineComponent(Object.assign(Object.assign({},{name:"BMap"}),{props:{ak:null,width:{default:"100%"},height:{default:"550px"},center:{default:()=>({lat:39.915185,lng:116.403901})},mapType:{default:"BMAP_NORMAL_MAP"},zoom:{default:14},heading:{default:0},tilt:{default:0},minZoom:{default:0},maxZoom:{default:21},noAnimation:{type:Boolean,default:!1},mapStyleId:null,mapStyleJson:null,showControls:{type:Boolean,default:!1},plugins:null,pluginsSourceLink:null,displayOptions:null,restrictCenter:{type:Boolean,default:!0},enableTraffic:{type:Boolean,default:!1},enableDragging:{type:Boolean,default:!0},enableInertialDragging:{type:Boolean,default:!0},enableScrollWheelZoom:{type:Boolean,default:!1},enableContinuousZoom:{type:Boolean,default:!0},enableResizeOnCenter:{type:Boolean,default:!0},enableDoubleClickZoom:{type:Boolean,default:!1},enableKeyboard:{type:Boolean,default:!0},enablePinchToZoom:{type:Boolean,default:!0},enableAutoResize:{type:Boolean,default:!0},onClick:null,onDblclick:null,onRightclick:null,onRightdblclick:null,onMaptypechange:null,onMousemove:null,onMouseover:null,onMouseout:null,onMovestart:null,onMoving:null,onMoveend:null,onZoomstart:null,onZoomend:null,onAddoverlay:null,onAddcontrol:null,onRemovecontrol:null,onRemoveoverlay:null,onClearoverlays:null,onDragstart:null,onDragging:null,onDragend:null,onAddtilelayer:null,onRemovetilelayer:null,onLoad:null,onResize:null,onHotspotclick:null,onHotspotover:null,onHotspotout:null,onTilesloaded:null,onTouchstart:null,onTouchmove:null,onTouchend:null,onLongpress:null},emits:["initd","unload","pluginReady","click","dblclick","rightclick","rightdblclick","maptypechange","mousemove","mouseover","mouseout","movestart","moving","moveend","zoomstart","zoomend","addoverlay","addcontrol","removecontrol","removeoverlay","clearoverlays","dragstart","dragging","dragend","addtilelayer","removetilelayer","load","resize","hotspotclick","hotspotover","hotspotout","tilesloaded","touchstart","touchmove","touchend","longpress"],setup(e,{expose:t,emit:o}){const a=e,i=n.ref();let s=null,u=n.ref(!1);const{ready:c}=l(),{uid:d,proxy:v}=n.getCurrentInstance(),C=n.computed((()=>y(a.width)?a.width:`${a.width}px`)),h=n.computed((()=>y(a.height)?a.height:`${a.height}px`)),M=a.ak||v.$baiduMapAk,b=a.plugins&&v.$baiduMapPlugins?Object.assign(v.$baiduMapPlugins,a.plugins):a.plugins||v.$baiduMapPlugins,B=a.pluginsSourceLink&&v.$baiduMapPluginsSourceLink?Object.assign(v.$baiduMapPluginsSourceLink,a.pluginsSourceLink):a.pluginsSourceLink||v.$baiduMapPluginsSourceLink||{};M||g("missing required props: ak");const O=`_initBMap${M}`;function k(){a.mapStyleId?s.setMapStyleV2({styleId:a.mapStyleId}):a.mapStyleJson&&s.setMapStyleV2({styleJson:a.mapStyleJson})}function L(e){e?s.setTrafficOn():s.setTrafficOff()}function S(e){var n,t;"string"==typeof e?s.centerAndZoom(e,a.zoom):s.centerAndZoom((n=e.lng,t=e.lat,new BMapGL.Point(n,t)),a.zoom)}function G(e){s.setDisplayOptions(e||{})}function I(e){s.setZoom(e,{noAnimation:a.noAnimation})}function P(e){void 0!==window[e]&&s.setMapType(window[e])}function T(e){s.setHeading(e)}function A(e){s.setTilt(e)}function D(e){e?s.enableDragging():s.disableDragging()}function _(e){e?s.enableInertialDragging():s.disableInertialDragging()}function z(e){e?s.enableScrollWheelZoom():s.disableScrollWheelZoom()}function E(e){e?s.enableContinuousZoom():s.disableContinuousZoom()}function R(e){e?s.enableResizeOnCenter():s.disableResizeOnCenter()}function x(e){e?s.enableDoubleClickZoom():s.disableDoubleClickZoom()}function N(e){e?s.enableKeyboard():s.disableKeyboard()}function j(e){e?s.enablePinchToZoom():s.disablePinchToZoom()}function W(e){e?s.enableAutoResize():s.disableAutoResize()}return n.onMounted((function(){r({src:`//api.map.baidu.com/api?type=webgl&v=1.0&ak=${M}&callback=${O}`,addCalToWindow:!0,key:O}).then((()=>{const{restrictCenter:e,minZoom:t,maxZoom:l,mapType:r,enableAutoResize:d,showControls:y,center:v}=a;i.value&&(s=new BMapGL.Map(i.value,{restrictCenter:e,minZoom:t,maxZoom:l,mapType:window[r],enableAutoResize:d,showControls:y}),S(v),function(){const{enableDragging:e,enableInertialDragging:n,enableScrollWheelZoom:t,enableContinuousZoom:o,enableResizeOnCenter:l,enableDoubleClickZoom:i,enableKeyboard:r,enablePinchToZoom:s,enableAutoResize:u,enableTraffic:c,displayOptions:d,mapType:p,zoom:f,tilt:m,heading:g}=a;I(f),A(m),L(c),T(g),P(p),N(r),D(e),W(u),j(s),E(o),R(l),x(i),z(t),_(n),G(d)}(),k(),n.watch((()=>a.zoom),I),n.watch((()=>a.tilt),A),n.watch((()=>a.heading),T),n.watch((()=>a.center),m(S),{deep:!0}),n.watch((()=>a.mapStyleId),k),n.watch((()=>a.mapStyleJson),m(k),{deep:!0}),n.watch((()=>a.displayOptions),m(G),{deep:!0}),n.watch((()=>a.mapType),P),n.watch((()=>a.enableTraffic),L),n.watch((()=>a.enableDragging),D),n.watch((()=>a.enableInertialDragging),_),n.watch((()=>a.enableScrollWheelZoom),z),n.watch((()=>a.enableContinuousZoom),E),n.watch((()=>a.enableResizeOnCenter),R),n.watch((()=>a.enableDoubleClickZoom),x),n.watch((()=>a.enableKeyboard),N),n.watch((()=>a.enablePinchToZoom),j),n.watch((()=>a.enableAutoResize),W),f(a,o,s),u.value||(u.value=!0,n.nextTick((()=>c(s,s))),b&&function(e,n={}){const t=[...new Set(e)].reduce(((e,t)=>{let o;return"string"==typeof t&&(o=p[t])?e.push(o(n[t])):"function"==typeof t&&e.push(t()),e}),[]);return Promise.all(t)}(b,B).then((()=>{o("pluginReady",s)})).catch((e=>{g("plugins load error: "+e)}))))})).catch(g)})),n.onUnmounted((()=>{null==s||s.destroy()})),t({getMapInstance:()=>s,getBaseMapOptions:()=>a,resetCenter:()=>S(a.center),setDragging:D}),n.provide("getMapInstance",(()=>s)),n.provide("parentUidGetter",d),n.provide("baseMapSetCenterAndZoom",(e=>S(e))),n.provide("baseMapSetDragging",(e=>D(e))),n.provide("getBaseMapOptions",(()=>a)),(e,t)=>(n.openBlock(),n.createElementBlock(n.Fragment,null,[n.createElementVNode("div",{class:"baidu-map-container",ref_key:"mapContainer",ref:i,style:n.normalizeStyle([{width:n.unref(C),height:n.unref(h)},{background:"#f1f1f1",position:"relative",overflow:"hidden"}])},[n.renderSlot(e.$slots,"loading",{},(()=>[n.createElementVNode("div",w,n.toDisplayString(n.unref(u)?"":"map loading..."),1)]))],4),n.renderSlot(e.$slots,"default")],64))}}));function b(e){var t;const{on:o,off:l}=a(),i=n.inject("getMapInstance"),r=n.inject("parentUidGetter")||(null===(t=n.getCurrentInstance())||void 0===t?void 0:t.uid),s=i&&i(),u=`__initd__${r}`;let c;const d=({map:n})=>{c=e(n)};s?d({map:s}):o(u,d),n.onUnmounted((()=>{l(u,d),c&&c()}))}const B={style:{display:"none"}};var O=n.defineComponent(Object.assign(Object.assign({},{name:"BControl",inheritAttrs:!1}),{props:{anchor:{default:"BMAP_ANCHOR_TOP_LEFT"},offset:{default:()=>({x:83,y:18})}},emits:["initd","unload"],setup(e){const t=e,o=n.ref(),{ready:a}=l();return n.onMounted((()=>{b((e=>{if(!o.value)return;const n=new BMapGL.Control;return n.defaultAnchor=window[t.anchor],n.defaultOffset=new BMapGL.Size(t.offset.x,t.offset.y),n.initialize=e=>e.getContainer().appendChild(o.value),e.addControl(n),a(e,n),()=>e.removeControl(n)}))})),(e,t)=>(n.openBlock(),n.createElementBlock("div",B,[n.createElementVNode("div",n.mergeProps({ref_key:"controlContainer",ref:o},e.$attrs),[n.renderSlot(e.$slots,"default")],16)]))}}));var k=n.defineComponent(Object.assign(Object.assign({},{name:"BScale"}),{props:{anchor:{default:"BMAP_ANCHOR_BOTTOM_LEFT"},offset:{default:()=>({x:83,y:18})},unit:{default:"BMAP_UNIT_METRIC"}},emits:["initd","unload"],setup(e){const t=e,{ready:o}=l();let a;function i(){a.setUnit(window[t.unit])}return b((e=>(a=new BMapGL.ScaleControl({offset:new BMapGL.Size(t.offset.x,t.offset.y),anchor:window[t.anchor]}),i(),e.addControl(a),o(e,a),()=>e.removeControl(a)))),n.watch((()=>t.unit),i),(e,n)=>null}}));var L=n.defineComponent(Object.assign(Object.assign({},{name:"BZoom"}),{props:{anchor:{default:"BMAP_ANCHOR_BOTTOM_RIGHT"},offset:{default:()=>({x:83,y:18})}},emits:["initd","unload"],setup(e){const n=e,{ready:t}=l();let o;return b((e=>(o=new BMapGL.ZoomControl({offset:new BMapGL.Size(n.offset.x,n.offset.y),anchor:window[n.anchor]}),e.addControl(o),t(e,o),()=>e.removeControl(o)))),(e,n)=>null}}));var S=n.defineComponent(Object.assign(Object.assign({},{name:"BCityList"}),{props:{anchor:{default:"BMAP_ANCHOR_TOP_LEFT"},offset:{default:()=>({x:18,y:18})},expand:{type:Boolean,default:!1}},emits:["initd","unload"],setup(e){const n=e,{ready:t}=l();let o;return b((e=>(o=new BMapGL.CityListControl({expand:n.expand,offset:new BMapGL.Size(n.offset.x,n.offset.y),anchor:window[n.anchor]}),e.addControl(o),t(e,o),()=>e.removeControl(o)))),(e,n)=>null}}));var G=n.defineComponent(Object.assign(Object.assign({},{name:"BLocation"}),{props:{anchor:{default:"BMAP_ANCHOR_BOTTOM_RIGHT"},offset:{default:()=>({x:18,y:18})},onLocationError:null,onLocationSuccess:null},emits:["initd","unload","locationSuccess","locationError"],setup(e,{emit:n}){const t=e,{ready:o}=l();let a;return b((e=>(a=new BMapGL.LocationControl({offset:new BMapGL.Size(t.offset.x,t.offset.y),anchor:window[t.anchor]}),e.addControl(a),o(e,a),f(t,n,a),()=>e.removeControl(a)))),(e,n)=>null}}));const I={},P={style:{display:"none"}};var T=n.defineComponent(Object.assign(Object.assign({},{name:"BCopyright",inheritAttrs:!1}),{props:{anchor:{default:"BMAP_ANCHOR_BOTTOM_RIGHT"},offset:{default:()=>({x:83,y:18})}},emits:["initd","unload"],setup(e){var t;const o=e,{ready:a}=l(),i=n.ref();let r;const s=null===(t=n.getCurrentInstance())||void 0===t?void 0:t.uid;return n.onMounted((()=>{const{anchor:e,offset:n}=o;b((t=>{if(!i.value)return;let o=t.getBounds();return(r=I[e])||(r=new BMapGL.CopyrightControl({offset:new BMapGL.Size(n.x,n.y),anchor:window[e]}),I[e]=r,t.addControl(r)),r.addCopyright({id:s,content:i.value.innerHTML,bounds:o}),a(t,r),()=>{var n,o;const a=I[e],l=null===(n=null==a?void 0:a.getCopyrightCollection)||void 0===n?void 0:n.bind(a);l&&(null===(o=l())||void 0===o?void 0:o.length)>1?a.removeCopyright(s):(t.removeControl(a),Reflect.deleteProperty(I,e))}}))})),n.onUpdated((()=>{var e,n;if(!r)return;let t=null==r?void 0:r.getCopyright(s);(null==t?void 0:t.content)!==(null===(e=i.value)||void 0===e?void 0:e.innerHTML)&&r.addCopyright({id:s,content:null===(n=i.value)||void 0===n?void 0:n.innerHTML,bounds:t.bounds})})),(e,t)=>(n.openBlock(),n.createElementBlock("div",P,[n.createElementVNode("div",n.mergeProps({ref_key:"copyrightContainer",ref:i},e.$attrs),[n.renderSlot(e.$slots,"default")],16)]))}}));var A=n.defineComponent(Object.assign(Object.assign({},{name:"BNavigation3d"}),{props:{anchor:{default:"BMAP_ANCHOR_BOTTOM_RIGHT"},offset:{default:()=>({x:83,y:18})}},emits:["initd","unload"],setup(e){const n=e,{ready:t}=l();let o;return b((e=>(o=new BMapGL.NavigationControl3D({offset:new BMapGL.Size(n.offset.x,n.offset.y),anchor:window[n.anchor]}),e.addControl(o),t(e,o),()=>e.removeControl(o)))),(e,n)=>null}}));var D=n.defineComponent(Object.assign(Object.assign({},{name:"BPanoramaControl"}),{props:{anchor:{default:"BMAP_ANCHOR_TOP_RIGHT"},offset:{default:()=>({x:10,y:10})}},emits:["initd","unload"],setup(e){const n=e,{ready:t}=l();let o;return b((e=>(o=new BMapGL.PanoramaControl,o.setOffset(new BMapGL.Size(n.offset.x,n.offset.y)),o.setAnchor(window[n.anchor]),e.addControl(o),t(e,o),()=>e.removeControl(o)))),(e,n)=>null}}));var _=n.defineComponent(Object.assign(Object.assign({},{name:"BPanoramaCoverageLayer"}),{emits:["initd","unload"],setup(e){const{ready:n}=l();let t;return b((e=>(t=new BMapGL.PanoramaCoverageLayer,e.addTileLayer(t),n(e,t),()=>e.removeTileLayer(t)))),(e,n)=>null}}));let z=null;function E(){if(null!==z)return z;const e="//mapopen.bj.bcebos.com/cms/react-bmap/markers_new2x_fbb9e99.png";z={simple_red:new BMapGL.Icon(e,new BMapGL.Size(21,33),{imageOffset:new BMapGL.Size(227,189),imageSize:new BMapGL.Size(300,300)}),simple_blue:new BMapGL.Icon(e,new BMapGL.Size(21,33),{imageOffset:new BMapGL.Size(227,225),imageSize:new BMapGL.Size(300,300)}),loc_red:new BMapGL.Icon(e,new BMapGL.Size(23,35),{imageOffset:new BMapGL.Size(200,189),imageSize:new BMapGL.Size(300,300)}),loc_blue:new BMapGL.Icon(e,new BMapGL.Size(23,35),{imageOffset:new BMapGL.Size(200,225),imageSize:new BMapGL.Size(300,300)}),start:new BMapGL.Icon(e,new BMapGL.Size(25,40),{imageOffset:new BMapGL.Size(200,139),imageSize:new BMapGL.Size(300,300)}),end:new BMapGL.Icon(e,new BMapGL.Size(25,40),{imageOffset:new BMapGL.Size(225,139),imageSize:new BMapGL.Size(300,300)}),location:new BMapGL.Icon(e,new BMapGL.Size(14,20),{imageOffset:new BMapGL.Size(124,233),imageSize:new BMapGL.Size(300,300)})};for(let n=1;n<=10;n++)z["red"+n]=new BMapGL.Icon(e,new BMapGL.Size(21,33),{imageOffset:new BMapGL.Size(21*(n-1),0),imageSize:new BMapGL.Size(300,300)});for(let n=1;n<=10;n++)z["blue"+n]=new BMapGL.Icon(e,new BMapGL.Size(21,33),{imageOffset:new BMapGL.Size(21*(n-1),66),imageSize:new BMapGL.Size(300,300)});return z}var R=n.defineComponent(Object.assign(Object.assign({},{name:"BMarker"}),{props:{position:null,offset:{default:()=>({x:0,y:0})},icon:null,zIndex:null,enableMassClear:{type:Boolean,default:!0},enableDragging:{type:Boolean,default:!1},enableClicking:{type:Boolean,default:!0},raiseOnDrag:{type:Boolean,default:!1},draggingCursor:{default:"pointer"},rotation:{default:0},title:{default:""},onClick:null,onDblclick:null,onMousedown:null,onMouseup:null,onMouseout:null,onMouseover:null,onRemove:null,onInfowindowclose:null,onInfowindowopen:null,onDragstart:null,onDragging:null,onDragend:null,onRightClick:null},emits:["initd","unload","click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","infowindowclose","infowindowopen","dragstart","dragging","dragend","rightclick"],setup(e,{emit:t}){const o=e,{ready:a}=l();let i;function r(){const e=E(),{icon:n}=o;if(y(n)&&e[n])return e[n];{const{anchor:e,imageOffset:t,imageSize:o,imageUrl:a,printImageUrl:l}=n,i={imageSize:new BMapGL.Size(o.width,o.height)};return e&&(i.anchor=new BMapGL.Size(e.x,e.y)),t&&(i.imageOffset=new BMapGL.Size(t.x,t.y)),l&&(i.printImageUrl=l),new BMapGL.Icon(a,new BMapGL.Size(o.width,o.height),i)}}function s(){i.setIcon(r())}function u(e){e?i.enableDragging():i.disableDragging()}function c(e){e?i.enableMassClear():i.disableMassClear()}function d(e){i.setOffset(new BMapGL.Size(e.x,e.y))}function p(e){i.setRotation(e)}return b((e=>{const l=()=>{if(!o.position)return;const{position:n,offset:l,enableMassClear:s,enableDragging:u,enableClicking:c,raiseOnDrag:d,draggingCursor:m,rotation:g,title:y,icon:v,zIndex:h}=o,w={offset:new BMapGL.Size(l.x,l.y),enableMassClear:s,enableDragging:u,enableClicking:c,raiseOnDrag:d,draggingCursor:m,title:y};v&&(w.icon=r()),i=new BMapGL.Marker(new BMapGL.Point(n.lng,n.lat),w),p(g),C(h)&&function(e){i.setZIndex(e)}(h),e.addOverlay(i),f(o,t,i),a(e,i)};return l(),n.watch((()=>o.position),m((e=>{var n;i?(n=e)&&n.lat&&n.lng&&i.setPosition(new BMapGL.Point(n.lng,n.lat)):l()})),{deep:!0}),n.watch((()=>o.icon),m(s),{deep:!0}),n.watch((()=>o.offset),m(d),{deep:!0}),n.watch((()=>o.enableDragging),u),n.watch((()=>o.enableMassClear),c),n.watch((()=>o.rotation),p),()=>{i&&e.removeOverlay(i)}})),n.provide("getOverlayInstance",(()=>i)),(e,n)=>null}}));var x=n.defineComponent(Object.assign(Object.assign({},{name:"BMarker3d"}),{props:{position:null,height:null,size:{default:50},shape:{default:"BMAP_SHAPE_CIRCLE"},fillColor:{default:"#f00"},fillOpacity:{default:.8},icon:null,enableMassClear:{type:Boolean,default:!0},onClick:null,onDblclick:null,onMousedown:null,onMouseup:null,onMouseout:null,onMouseover:null,onRemove:null,onRightClick:null},emits:["initd","unload","click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","rightclick"],setup(e,{emit:t}){const o=e,{ready:a}=l();let i;function r(){const{icon:e}=o,{anchor:n,imageOffset:t,imageSize:a,imageUrl:l,printImageUrl:i}=e,r={imageSize:new BMapGL.Size(a.width,a.height)};return n&&(r.anchor=new BMapGL.Size(n.x,n.y)),t&&(r.imageOffset=new BMapGL.Size(t.x,t.y)),i&&(r.printImageUrl=i),new BMapGL.Icon(l,new BMapGL.Size(a.width,a.height),r)}function s(e){i.setFillColor(e)}function u(e){i.setFillOpacity(e)}function c(){i.setIcon(r())}function d(e){e?i.enableMassClear():i.disableMassClear()}return b((e=>{const l=()=>{if(!o.position||!o.height)return;const{position:n,shape:l,fillColor:s,fillOpacity:u,size:c,icon:p,height:m,enableMassClear:g}=o,y={size:c,fillColor:s,fillOpacity:u,shape:window[l]};p&&(y.icon=r()),i=new BMapGL.Marker3D(new BMapGL.Point(n.lng,n.lat),m,y),e.addOverlay(i),d(g),f(o,t,i),a(e,i)};return l(),n.watch((()=>o.position),m((e=>{i?function(e){try{i.setPosition(new BMapGL.Point(e.lng,e.lat))}catch(e){console.error(e)}}(e):l()})),{deep:!0}),n.watch((()=>o.height),(e=>{var n;i?(n=e,i.setHeight(n)):l()})),n.watch((()=>o.enableMassClear),d),n.watch((()=>o.icon),m(c),{deep:!0}),n.watch((()=>o.enableMassClear),d),n.watch((()=>o.fillOpacity),u),n.watch((()=>o.fillColor),s),()=>{e.removeOverlay(i)}})),n.provide("getOverlayInstance",(()=>i)),(e,n)=>null}}));var N=n.defineComponent(Object.assign(Object.assign({},{name:"BLabel"}),{props:{content:null,position:null,offset:{default:()=>({x:0,y:0})},style:null,enableMassClear:{type:Boolean,default:!0},onClick:null,onDblclick:null,onMousedown:null,onMouseup:null,onMouseout:null,onMouseover:null,onRemove:null,onRightclick:null},emits:["initd","unload","click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","rightclick"],setup(e,{emit:t}){const o=e,{ready:a}=l();let i;function r(e){i.setPosition(new BMapGL.Point(e.lng,e.lat))}function s(e){C(e)&&i.setStyle(e)}function u(e){i.setContent(e)}function c(e){i.setOffset(new BMapGL.Size(e.x,e.y))}function d(e){e?i.enableMassClear():i.disableMassClear()}return b((e=>((()=>{const{content:n,position:a,offset:l,enableMassClear:r,style:s}=o,u={position:new BMapGL.Point(a.lng,a.lat),offset:new BMapGL.Size(l.x,l.y),enableMassClear:r};i=new BMapGL.Label(n,u),s&&i.setStyle(s),e.addOverlay(i),f(o,t,i)})(),a(e,i),n.watch((()=>o.position),m(r),{deep:!0}),n.watch((()=>o.offset),m(c),{deep:!0}),n.watch((()=>o.style),m(s),{deep:!0}),n.watch((()=>o.content),u),n.watch((()=>o.enableMassClear),d),()=>{i&&e.removeOverlay(i)}))),n.provide("getOverlayInstance",(()=>i)),(e,n)=>null}}));var j=n.defineComponent(Object.assign(Object.assign({},{name:"BPolyline"}),{props:{path:null,strokeColor:{default:"#000"},strokeWeight:{default:2},strokeOpacity:{default:1},strokeStyle:{default:"solid"},enableMassClear:{type:Boolean,default:!0},enableEditing:{type:Boolean,default:!1},enableClicking:{type:Boolean,default:!0},geodesic:{type:Boolean,default:!1},clip:{type:Boolean,default:!0},onClick:null,onDblclick:null,onMousedown:null,onMouseup:null,onMouseout:null,onMouseover:null,onRemove:null,onLineupdate:null},emits:["initd","unload","click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],setup(e,{emit:t}){const o=e,{ready:a}=l();let i;function r(e){return e.map((({lng:e,lat:n})=>new BMapGL.Point(e,n)))}function s(e){i.setStrokeColor(e)}function u(e){i.setStrokeOpacity(e)}function c(e){i.setStrokeWeight(e)}function d(e){i.setStrokeStyle(e)}function p(e){e?i.enableMassClear():i.disableMassClear()}function g(e){e?i.enableEditing():i.disableEditing()}return b((e=>{const l=()=>{if(!o.path||!o.path.length)return;const{path:n,strokeColor:l,strokeWeight:s,strokeOpacity:u,strokeStyle:c,enableMassClear:d,enableEditing:p,enableClicking:m,geodesic:g,clip:y}=o,v=r(n);i=new BMapGL.Polyline(v,{strokeColor:l,strokeWeight:s,strokeOpacity:u,strokeStyle:c,enableMassClear:d,enableEditing:p,enableClicking:m,geodesic:g,clip:y}),e.addOverlay(i),f(o,t,i),a(e,i)};return l(),n.watch((()=>o.path),m((e=>{var n;i?(n=e,i.setPath(r(n))):l()})),{deep:!0}),n.watch((()=>o.strokeColor),s),n.watch((()=>o.strokeOpacity),u),n.watch((()=>o.strokeWeight),c),n.watch((()=>o.strokeStyle),d),n.watch((()=>o.enableMassClear),p),n.watch((()=>o.enableEditing),g),()=>{e.removeOverlay(i)}})),n.provide("getOverlayInstance",(()=>i)),(e,n)=>null}}));var W=n.defineComponent(Object.assign(Object.assign({},{name:"BBezierCurve"}),{props:{path:null,controlPoints:null,strokeColor:{default:"#000"},strokeWeight:{default:2},strokeOpacity:{default:1},strokeStyle:{default:"solid"},enableMassClear:{type:Boolean,default:!0},onClick:null,onDblclick:null,onMousedown:null,onMouseup:null,onMouseout:null,onMouseover:null,onRemove:null,onLineupdate:null},emits:["initd","unload","click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],setup(e,{emit:t}){const o=e,{ready:a}=l();let i;function r(e){return e.map((({lng:e,lat:n})=>new BMapGL.Point(e,n)))}function s(e){i.setStrokeColor(e)}function u(e){i.setStrokeOpacity(e)}function c(e){i.setStrokeWeight(e)}function d(e){i.setStrokeStyle(e)}function p(e){e?i.enableMassClear():i.disableMassClear()}return b((e=>{const l=()=>{if(!(o.path&&o.path.length&&o.controlPoints&&o.controlPoints.length))return;const{path:n,controlPoints:l,strokeColor:s,strokeWeight:u,strokeOpacity:c,strokeStyle:d,enableMassClear:p}=o,m=r(n),g=l.map((e=>r(e)));try{i=new BMapGL.BezierCurve(m,g,{strokeColor:s,strokeWeight:u,strokeOpacity:c,strokeStyle:d,enableMassClear:p})}catch(e){console.error("Init bezierCurve overlay error, make sure path and controlPoints data is correct!")}e.addOverlay(i),a(e,i),f(o,t,i)};return l(),n.watch((()=>o.path),m((e=>{var n;i?(n=e,i.setPath(r(n))):l()})),{deep:!0}),n.watch((()=>o.controlPoints),m((e=>{var n;i?(n=e,i.setControlPoints(n.map((e=>r(e))))):l()})),{deep:!0}),n.watch((()=>o.strokeColor),s),n.watch((()=>o.strokeOpacity),u),n.watch((()=>o.strokeWeight),c),n.watch((()=>o.strokeStyle),d),n.watch((()=>o.enableMassClear),p),()=>{e.removeOverlay(i)}})),n.provide("getOverlayInstance",(()=>i)),(e,n)=>null}}));var Z=n.defineComponent(Object.assign(Object.assign({},{name:"BPolygon"}),{props:{path:null,isBoundary:{type:Boolean},strokeColor:{default:"#000"},autoCenter:{type:Boolean,default:!0},strokeWeight:{default:2},strokeOpacity:{default:1},strokeStyle:{default:"solid"},fillColor:{default:"#fff"},fillOpacity:{default:.3},enableMassClear:{type:Boolean},enableEditing:{type:Boolean},enableClicking:{type:Boolean},geodesic:{type:Boolean,default:!1},clip:{type:Boolean,default:!0},onClick:null,onDblclick:null,onMousedown:null,onMouseup:null,onMouseout:null,onMouseover:null,onRemove:null,onLineupdate:null},emits:["initd","unload","click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],setup(e,{emit:t}){const o=e,{ready:a}=l(),i=n.inject("baseMapSetCenterAndZoom");let r;function s(){n.nextTick((()=>{var e;if(o.autoCenter)try{const n=null===(e=r.getBounds())||void 0===e?void 0:e.getCenter();i(n)}catch(e){console.warn("set center error",e)}}))}function u(e){return e.map((({lng:e,lat:n})=>new BMapGL.Point(e,n)))}function c(e){r.setStrokeColor(e)}function d(e){r.setFillColor(e)}function p(e){r.setStrokeOpacity(e)}function g(e){r.setFillOpacity(e)}function y(e){r.setStrokeWeight(e)}function v(e){r.setStrokeStyle(e)}function C(e){e?r.enableMassClear():r.disableMassClear()}function h(e){e?r.enableEditing():r.disableEditing()}return b((e=>{const l=()=>{if(!o.path||!o.path.length)return;const{path:l,strokeColor:i,strokeWeight:m,strokeOpacity:w,strokeStyle:M,fillOpacity:b,fillColor:B,enableMassClear:O,enableEditing:k,enableClicking:L,geodesic:S,clip:G,isBoundary:I}=o,P=I?l:u(l);P&&(r=new BMapGL.Polygon(P,{strokeColor:i,strokeWeight:m,strokeOpacity:w,strokeStyle:M,fillOpacity:b,fillColor:B,enableMassClear:O,enableEditing:k,enableClicking:L,geodesic:S,clip:G}),e.addOverlay(r),f(o,t,r),a(e,r),s(),n.watch((()=>o.strokeColor),c),n.watch((()=>o.strokeOpacity),p),n.watch((()=>o.fillColor),d),n.watch((()=>o.fillOpacity),g),n.watch((()=>o.strokeWeight),y),n.watch((()=>o.strokeStyle),v),n.watch((()=>o.enableMassClear),C),n.watch((()=>o.enableEditing),h))};return l(),n.watch((()=>o.path),m((e=>{r?function(e){o.isBoundary?r.setPath(e):r.setPath(u(e));s()}(e):l()})),{deep:!0}),()=>{r&&e.removeOverlay(r)}})),n.provide("getOverlayInstance",(()=>r)),(e,n)=>null}}));const F={style:{display:"none"}};var $=n.defineComponent(Object.assign(Object.assign({},{name:"BInfoWindow"}),{props:{modelValue:{type:Boolean,default:!1},title:{default:""},position:null,width:{default:0},height:{default:0},maxWidth:{default:220},offset:{default:()=>({x:0,y:0})},enableAutoPan:{type:Boolean,default:!0},enableCloseOnClick:{type:Boolean,default:!0},onClose:null,onOpen:null,onMaximize:null,onRestore:null,onClickclose:null},emits:["initd","unload","close","open","maximize","restore","clickclose","update:modelValue"],setup(e,{emit:t}){const o=e,a=n.computed({get:()=>o.modelValue,set(e){t("update:modelValue",e)}}),i=n.ref(),{ready:r}=l();let s,u;function c(){const{position:e}=o;e&&s&&(u.openInfoWindow(s,new BMapGL.Point(e.lng,e.lat)),a.value=!0)}function d(){s&&(s.hide(),a.value=!1)}function p(){var e;s.redraw(),Array.prototype.forEach.call((null===(e=i.value)||void 0===e?void 0:e.querySelectorAll("img"))||[],(e=>{e.onload=()=>{s.redraw()}}))}function g(e){s.setTitle(e)}function y(e){s.setHeight(e)}function v(e){s.setWidth(e)}function C(e){s.setMaxWidth(e)}function h(e){e?s.enableAutoPan():s.disableAutoPan()}function w(e){e?s.enableCloseOnClick():s.disableCloseOnClick()}function M(e){s.setOffset(new BMapGL.Size(e.x,e.y))}return b((e=>{u=e;const l=()=>{const{title:l,width:u,height:d,enableAutoPan:m,maxWidth:g,offset:y,enableCloseOnClick:v}=o,C={width:u,height:d,title:l,maxWidth:g,enableAutoPan:m,enableCloseOnClick:v,offset:new BMapGL.Size(y.x,y.y)};s=new BMapGL.InfoWindow(i.value||"",C),s.addEventListener("close",(()=>{o.modelValue&&(a.value=!1)})),s.addEventListener("open",(()=>{o.modelValue||(a.value=!0)})),e.addOverlay(s),p(),function(){const e=window.MutationObserver;if(!e)return;new e((()=>{s.redraw()})).observe(i.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}(),f(o,t,s),r(e,s),o.modelValue&&n.nextTick((()=>{c(),n.nextTick((()=>{!s._visible&&(a.value=!1)}))}))};return i.value?l():n.nextTick((()=>l())),n.watch((()=>o.position),m((e=>{var n;console.log(e),n=e,d(),s.setPosition(new BMapGL.Point(n.lng,n.lat)),c()})),{deep:!0}),n.watch((()=>o.offset),m(M),{deep:!0}),n.watch((()=>o.title),g),n.watch((()=>o.width),v),n.watch((()=>o.height),y),n.watch((()=>o.maxWidth),C),n.watch((()=>o.enableAutoPan),h),n.watch((()=>o.enableCloseOnClick),w),n.watch((()=>o.modelValue),m((()=>{o.modelValue?c():d()}))),()=>{s&&e.removeOverlay(s)}})),n.onUpdated((()=>{var e;s&&s.isOpen()&&(e=i.value||"",s.setContent(e),p())})),n.provide("getOverlayInstance",(()=>s)),(e,t)=>(n.openBlock(),n.createElementBlock("div",F,[n.createElementVNode("div",n.mergeProps({ref_key:"infoWindowContainer",ref:i},e.$attrs),[n.renderSlot(e.$slots,"default")],16)]))}}));var V=n.defineComponent(Object.assign(Object.assign({},{name:"BCircle"}),{props:{center:null,radius:null,strokeColor:{default:"#000"},strokeOpacity:{default:1},fillColor:{default:"#fff"},fillOpacity:{default:.3},strokeWeight:{default:2},strokeStyle:{default:"solid"},enableMassClear:{type:Boolean,default:!0},enableEditing:{type:Boolean,default:!1},enableClicking:{type:Boolean,default:!0},geodesic:{type:Boolean,default:!1},clip:{type:Boolean,default:!0},onClick:null,onDblclick:null,onMousedown:null,onMouseup:null,onMouseout:null,onMouseover:null,onRemove:null,onLineupdate:null},emits:["initd","unload","click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],setup(e,{emit:t}){const o=e,{ready:a}=l();let i;function r(e){i.setRadius(e)}function s(e){i&&i.setCenter(new BMapGL.Point(e.lng,e.lat))}function u(e){i.setStrokeColor(e)}function c(e){i.setFillColor(e)}function d(e){i.setStrokeOpacity(e)}function p(e){i.setFillOpacity(e)}function g(e){i.setStrokeWeight(e)}function y(e){i.setStrokeStyle(e)}function v(e){e?i.enableMassClear():i.disableMassClear()}function C(e){e?i.enableEditing():i.disableEditing()}return b((e=>((()=>{const{center:n,radius:l,strokeColor:r,strokeOpacity:s,fillColor:u,fillOpacity:c,strokeWeight:d,strokeStyle:p,enableMassClear:m,enableEditing:g,enableClicking:y,geodesic:v,clip:C}=o,h=new BMapGL.Point(n.lng,n.lat);i=new BMapGL.Circle(h,l,{strokeColor:r,strokeWeight:d,strokeOpacity:s,strokeStyle:p,enableMassClear:m,enableEditing:g,enableClicking:y,geodesic:v,clip:C,fillOpacity:c,fillColor:u}),e.addOverlay(i),f(o,t,i),a(e,i)})(),n.watch((()=>o.center),m(s),{deep:!0}),n.watch((()=>o.radius),r),n.watch((()=>o.strokeColor),u),n.watch((()=>o.strokeOpacity),d),n.watch((()=>o.fillColor),c),n.watch((()=>o.fillOpacity),p),n.watch((()=>o.strokeWeight),g),n.watch((()=>o.strokeStyle),y),n.watch((()=>o.enableMassClear),v),n.watch((()=>o.enableEditing),C),()=>{e.removeOverlay(i)}))),n.provide("getOverlayInstance",(()=>i)),(e,n)=>null}}));var U=n.defineComponent(Object.assign(Object.assign({},{name:"BPrism"}),{props:{path:null,altitude:null,isBoundary:{type:Boolean},topFillColor:{default:"#fff"},topFillOpacity:{default:.5},sideFillColor:{default:"#fff"},sideFillOpacity:{default:.8},autoCenter:{type:Boolean,default:!0},enableMassClear:{type:Boolean,default:!0},onClick:null,onDblclick:null,onMousedown:null,onMouseup:null,onMouseout:null,onMouseover:null,onRemove:null,onLineupdate:null},emits:["initd","unload","click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],setup(e,{emit:t}){const o=e,{ready:a}=l(),i=n.inject("baseMapSetCenterAndZoom");let r;function s(e){e?r.enableMassClear():r.disableMassClear()}function u(e){r.setTopFillColor(e)}function c(e){r.setTopFillOpacity(e)}function d(e){r.setSideFillColor(e)}function p(e){r.setSideFillOpacity(e)}function g(e){r.setAltitude(e)}return b((e=>{const l=()=>{r&&e.removeOverlay(r)},y=()=>{if(!o.path||!o.path.length)return;const{path:l,altitude:m,isBoundary:y,topFillColor:v,topFillOpacity:C,sideFillColor:h,sideFillOpacity:w,enableMassClear:M}=o,b=y?l:function(e){return e.map((({lng:e,lat:n})=>new BMapGL.Point(e,n)))}(l);b&&(r=new BMapGL.Prism(b,m,{topFillColor:v,topFillOpacity:C,sideFillColor:h,sideFillOpacity:w,enableMassClear:M}),e.addOverlay(r),f(o,t,r),a(e,r),o.autoCenter&&n.nextTick((()=>{var e;try{const n=null===(e=r.getBounds())||void 0===e?void 0:e.getCenter();i(n)}catch(e){console.warn("set center error",e)}})),n.watch((()=>o.enableMassClear),s),n.watch((()=>o.topFillColor),u),n.watch((()=>o.topFillOpacity),c),n.watch((()=>o.sideFillColor),d),n.watch((()=>o.sideFillOpacity),p),n.watch((()=>o.altitude),g))};return y(),n.watch((()=>o.path),m((()=>{r||y()})),{deep:!0}),l})),n.provide("getOverlayInstance",(()=>r)),(e,n)=>null}}));var H=n.defineComponent(Object.assign(Object.assign({},{name:"BGroundOverlay"}),{props:{type:null,url:null,startPoint:null,endPoint:null,autoCenter:{type:Boolean,default:!1},opacity:{default:1},onClick:null,onDblclick:null,onMousemove:null,onMouseover:null,onMouseout:null},emits:["initd","unload","click","dblclick","mousemove","mouseover","mouseout"],setup(e,{emit:t}){const o=e,{ready:a}=l();let i;return b((e=>{const l=()=>{i&&e.removeOverlay(i)},r=()=>{l();let{startPoint:t,endPoint:a,opacity:r,type:s,autoCenter:u}=o;const c=function(){let e=o.url;"function"==typeof e&&(e=e());return e}();if(!c||!t||!a)return;const d=(p=t,f=a,new BMapGL.Bounds(new BMapGL.Point(p.lng,f.lat),new BMapGL.Point(f.lng,p.lat)));var p,f;const m={opacity:r,type:s,url:c.value||c};i=new BMapGL.GroundOverlay(d,m),e.addOverlay(i),u&&n.nextTick((()=>{try{const n=d.getCenter();e.panTo(n)}catch(e){g("set center error")}}))};return r(),f(o,t,i),a(e,i),n.watch((()=>o),m(r),{deep:!0}),l})),(e,n)=>null}}));var J=n.defineComponent(Object.assign(Object.assign({},{name:"BContextMenu"}),{props:{width:{default:100},menuItems:{default:()=>[]},onOpen:null,onClose:null},emits:["initd","unload","open","close"],setup(e,{emit:t}){const o=e,{ready:a}=l();let i;return b((e=>{const l=e,r=()=>{i&&l.removeContextMenu(i)},s=()=>{const{width:n,menuItems:a}=o;i=new BMapGL.ContextMenu;for(const t of a){if(y(t)&&"-"===t){i.addSeparator();continue}const o=new BMapGL.MenuItem(t.text,(function(n,o){t.callback.call(null,{point:n,pixel:o,map:e,BMapGL:BMapGL,target:l})}),{width:n,id:String(Math.random())});t.disabled?o.disable():o.enable(),i.addItem(o)}l.addContextMenu(i),f(o,t,i)};return n.watch((()=>o.menuItems),m((()=>{r(),s()})),{deep:!0}),s(),a(e,i),r})),(e,n)=>null}}));var q=n.defineComponent(Object.assign(Object.assign({},{name:"BDistrictLayer"}),{props:{name:null,kind:{default:0},fillColor:{default:"#fdfd27"},fillOpacity:{default:1},strokeColor:{default:"#231cf8"},viewport:{type:Boolean,default:!1},onClick:null,onDblclick:null,onRightclick:null,onRightdblclick:null,onMousemove:null,onMouseover:null,onMouseout:null},emits:["initd","unload","mouseover","mouseout","click"],setup(e,{emit:n}){const t=e,{ready:o}=l();let a;return b((e=>{if(!t.name)return l="DistrictLayer props.name is required",void console.warn(`[Vue3 BaiduMap GL] ${l}`);var l;const{name:i,kind:r,fillColor:s,fillOpacity:u,strokeColor:c,viewport:d}=t;return a=new BMapGL.DistrictLayer({name:`(${i})`,kind:r,fillColor:s,fillOpacity:u,strokeColor:c,viewport:d}),e.addDistrictLayer(a),f(t,n,a),o(e,a),()=>e.removeDistrictLayer(a)})),(e,n)=>null}})),K=[M,O,k,L,A,R,x,T,G,N,j,Z,W,V,S,U,$,J,D,_,H,q];const Y={1:"PLAYING",2:"INITIAL",3:"STOPPING"};const Q={0:"BMAP_STATUS_SUCCESS",8:"ERR_POSITION_TIMEOUT",2:"ERR_POSITION_UNAVAILABLE",6:"ERR_PERMISSION_DENIED"};function X(e,n,t){return new Promise((o=>{e.getPoint(n,(e=>{o(e||null)}),t)}))}function ee(e,n,t){return new Promise((o=>{e.getLocation(new BMapGL.Point(n.lng,n.lat),(e=>{o(e||null)}),t)}))}var ne,te;e.CoordinatesFromType=void 0,(ne=e.CoordinatesFromType||(e.CoordinatesFromType={}))[ne.COORDINATES_WGS84=1]="COORDINATES_WGS84",ne[ne.COORDINATES_WGS84_MC=2]="COORDINATES_WGS84_MC",ne[ne.COORDINATES_GCJ02=3]="COORDINATES_GCJ02",ne[ne.COORDINATES_GCJ02_MC=4]="COORDINATES_GCJ02_MC",ne[ne.COORDINATES_BD09=5]="COORDINATES_BD09",ne[ne.COORDINATES_BD09_MC=6]="COORDINATES_BD09_MC",ne[ne.COORDINATES_MAPBAR=7]="COORDINATES_MAPBAR",ne[ne.COORDINATES_51=8]="COORDINATES_51",e.CoordinatesToType=void 0,(te=e.CoordinatesToType||(e.CoordinatesToType={}))[te.COORDINATES_GCJ02=3]="COORDINATES_GCJ02",te[te.COORDINATES_BD09=5]="COORDINATES_BD09",te[te.COORDINATES_BD09_MC=6]="COORDINATES_BD09_MC";const oe={install:(e,n)=>{const{ak:t,plugins:o,pluginsSourceLink:a}=n||{},l=e.config.globalProperties;for(const n of K){const t=n.name;e.component(t,n)}t&&(l.$baiduMapAk=t),o&&(l.$baiduMapPlugins=o),a&&(l.$baiduMapPluginsSourceLink=a)},version:"2.0.1"},ae=oe.install,le=oe.version;e.BBezierCurve=W,e.BCircle=V,e.BCityList=S,e.BContextMenu=J,e.BControl=O,e.BCopyright=T,e.BDistrictLayer=q,e.BGroundOverlay=H,e.BInfoWindow=$,e.BLabel=N,e.BLocation=G,e.BMap=M,e.BMarker=R,e.BMarker3d=x,e.BNavigation3d=A,e.BPanoramaControl=D,e.BPanoramaCoverageLayer=_,e.BPolygon=Z,e.BPolyline=j,e.BPrism=U,e.BScale=k,e.BZoom=L,e.default=oe,e.install=ae,e.useAddressGeocoder=function(e){const t=n.ref(),o=n.ref(!0),a=n.ref(!0);let l;return{get:(n,i)=>{if(l||(l=new BMapGL.Geocoder),!n)return g("missed required params: address");if(!i)return g("missed required  params: city");const r=v(n);o.value=!0,(r?Promise.all(n.map((e=>X(l,e,i)))):X(l,n,i)).then((n=>{if(n)if(r){let e=0;t.value=n.map((n=>(e+=+!n,n))),a.value=e===n.length}else t.value=n,a.value=!1;else t.value=n,a.value=!0;e&&e(t)})).catch((e=>{g(e),a.value=!0,t.value=null})).finally((()=>{o.value=!1}))},point:t,isLoading:o,isEmpty:a}},e.useAreaBoundary=function(e){const t=n.ref(!1),o=n.ref([]);let a;return n.onUnmounted((()=>{a=null})),{isLoading:t,boundaries:o,get:n=>{a||(a=new BMapGL.Boundary),t.value=!0,a.get(n,(n=>{t.value=!1,o.value=n.boundaries,e&&e(o)}))}}},e.useBrowserLocation=function(e,t){e=e||{};const o=n.ref({}),a=n.ref(!0),l=n.ref(!1),i=n.ref();return{get:()=>{e.SDKLocation=e.enableSDKLocation,new Promise(((n,t)=>{a.value=!0;const o=new BMapGL.Geolocation;o.getCurrentPosition((function(e){const a=o.getStatus();if(i.value=Q[a],a===window.BMAP_STATUS_SUCCESS){const{address:t,accuracy:o,point:a}=e;n({accuracy:o,point:a,address:t})}else t()}),e)})).then((e=>{l.value=!1,o.value=e,t&&t(o)})).catch((()=>{l.value=!0})).finally((()=>{a.value=!1}))},isLoading:a,isError:l,status:i,location:o}},e.useDefaultMarkerIcons=E,e.useIpLocation=function(e){const t=n.ref({}),o=n.ref(!0);return{location:t,isLoading:o,get:()=>{o.value=!0,(new BMapGL.LocalCity).get((n=>{o.value=!1,t.value={code:n.code,point:n.center,name:n.name},e&&e(t)}))}}},e.usePoint=function(){const e=n.ref(null);return{point:e,set:({lng:n,lat:t})=>{e.value=new BMapGL.Point(n,t)}}},e.usePointConvertor=function(){const e=n.ref(),t=n.ref(!0),o=n.ref(!1),a=n.ref();let l;return{convert:(n,i,r)=>{if(!n)return g("missed required params: points");if(!i)return g("missed required params: from");if(!r)return g("missed required params: to");if(!n.length)return;l||(l=new BMapGL.Convertor),t.value=!0;const s=n.map((e=>new BMapGL.Point(e.lng,e.lat)));(function(e,n,t,o){return new Promise(((a,l)=>{e.translate(n,t,o,(e=>{0===e.status?a(e):l(e.status)}))}))})(l,s,i,r).then((n=>{e.value=n.points.map((e=>({lng:e.lng,lat:e.lat}))),a.value=n.status,o.value=!1})).catch((e=>{e.value=e,o.value=!0})).finally((()=>{t.value=!1}))},result:e,isLoading:t,isError:o,status:a}},e.usePointGeocoder=function(e,t){e=e||{};const o=n.ref(),a=n.ref(!0),l=n.ref(!0);let i;return{get:n=>{if(!n)return g("missed required params: point");i||(i=new BMapGL.Geocoder);const r=v(n);a.value=!0,(r?Promise.all(n.map((n=>ee(i,n,e)))):ee(i,n,e)).then((e=>{if(e)if(r){let n=0;o.value=e.map((e=>(n+=+!e,e))),l.value=n===e.length}else o.value=e,l.value=!1;else o.value=e,l.value=!0;t&&t(o)})).catch((()=>{l.value=!0,o.value=void 0})).finally((()=>{a.value=!1}))},result:o,isLoading:a,isEmpty:l}},e.useTrackAnimation=function(e,t){let o,a,l,i;const r=n.ref("INITIAL");t=t||{},n.watch((()=>e.value),(e=>{l=e}));const s=()=>{setTimeout((()=>{o&&(r.value=Y[o._status])}))};return n.onUnmounted((()=>{o&&"INITIAL"!==r.value&&o.cancel(),i&&(i.removeOverlay(a),a=null)})),{setPath:e=>{const n=e.map((e=>new BMapGL.Point(e.lng,e.lat)));a=new BMapGL.Polyline(n),o||(i=l.getMapInstance(),o=new BMapGLLib.TrackAnimation(i,a,t))},start:()=>{o&&"INITIAL"===r.value&&(o.start(),s(),setTimeout((()=>{o._viewAni.addEventListener("animationend",s)})))},stop:()=>{o&&(o.pause(),s())},cancel:()=>{o&&(o.cancel(),s())},proceed:()=>{o&&(o.continue(),s())},status:r}},e.useViewAnimation=function(e,t){(t=t||{}).disableDragging=void 0===t.disableDragging;const o=n.ref("INITIAL"),a={animationcancel:[()=>o.value="INITIAL"],animationend:[()=>o.value="INITIAL"],animationstart:[()=>o.value="PLAYING"]};let l,i,r=!1;n.watch((()=>e.value),(e=>{l=e}));const s=()=>{const{enableDragging:e}=l.getBaseMapOptions();l.setDragging(e)};let u={addEventListener(e,n){a[e]||(a[e]=[]),a[e].push(n)},removeEventListener(e,n){const t=a[e];if(t)if(n)for(let e=t.length;e>=0;e--)t[e]===n&&t.splice(e,1);else a[e]=[]}};return n.onUnmounted((()=>{try{u&&"INITIAL"==o.value&&(i=l.getMapInstance(),u._cancel(i),s())}catch(e){return!1}})),{viewAnimation:u,start:()=>{r&&"PLAYING"!==o.value&&(i=l.getMapInstance(),i.startViewAnimation(u),l.setDragging(!t.disableDragging))},cancel:()=>{r&&"INITIAL"!==o.value&&(u._cancel(i),s())},stop:()=>{r&&"PLAYING"===o.value&&(u._pause(),o.value="STOPPING")},proceed:()=>{r&&"STOPPING"===o.value&&(u._continue(),o.value="PLAYING")},status:o,setKeyFrames:e=>{const{loop:n,duration:o,delay:l}=t;for(const n of e)if(n.center){const{lng:e,lat:t}=n.center;n.center=new BMapGL.Point(e,t)}u=new BMapGL.ViewAnimation(e,{duration:o,delay:l,interation:n});for(const e of Object.keys(a)){const n=a[e];n&&n.length&&n.forEach((n=>{u.addEventListener(e,n)}))}r=!0}}},e.version=le,Object.defineProperty(e,"__esModule",{value:!0})}));
